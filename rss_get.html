<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RSS Feed Fetcher</title>
</head>
<body>
    <h1>RSS Feed Fetcher</h1>
    <ul id="feedList"></ul>

    <script>
        async function fetchFeed(url, title) {
            try {
                // Use a CORS proxy
                const proxyUrl = 'https://api.allorigins.win/get?url=';
                const response = await fetch(proxyUrl + encodeURIComponent(url));
                const data = await response.json();
                const parser = new DOMParser();
                const xmlDoc = parser.parseFromString(data.contents, 'application/xml');
                const items = xmlDoc.querySelectorAll('item, entry');
                
                let output = `<li><h2>${title}</h2><ul>`;
                items.forEach((item, index) => {
                    if (index < 5) { // Limit to last 5 posts
                        const itemTitle = item.querySelector('title').textContent;
                        const itemLink = item.querySelector('link').textContent;
                        output += `<li><a href="${itemLink}" target="_blank">${itemTitle}</a></li>`;
                    }
                });
                output += '</ul></li>';
                document.getElementById('feedList').innerHTML += output;
            } catch (error) {
                console.error('Error fetching feed:', error);
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            fetchFeed('https://abelsan.substack.com/feed', 'Substack');
            fetchFeed('https://www.youtube.com/feeds/videos.xml?channel_id=UCqiQs3iTyDbIy3HvtslAoWQ', 'YouTube');
            fetchFeed('https://anchor.fm/s/f8df75fc/podcast/rss', 'Spotify Podcast');
        });
    </script>
</body>
</html>
